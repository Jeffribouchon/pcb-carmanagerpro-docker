{% extends "base.html" %}

{% block content %}
<h2>ü§ù Matching Acheteurs ‚Üî V√©hicules</h2>

<!-- üîπ Formulaire de recherche -->
<form method="POST" class="mb-3">
    <div class="input-group">
        <input type="text" name="query" class="form-control" placeholder="Rechercher contacts ou crit√®res..." value="{{ query or '' }}">
        <button class="btn btn-primary" type="submit">Rechercher</button>
    </div>
</form>

{% if contacts %}
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Contact</th>
        <th>Email</th>
        <th>T√©l√©phone</th>
        <th>V√©hicules correspondants</th>
      </tr>
    </thead>
    <tbody>
      {% for c in contacts %}
        <tr>
          <td>{{ c.name }}</td>
          <td>{{ c.email or "Pas d'email" }}</td>
          <td>{{ c.phone or "Pas de t√©l√©phone" }}</td>
          <td>
            {% if c.matching_vehicles %}
              <ul>
                {% for v in c.matching_vehicles %}
                  <li>{{ v.name }} {% if v.list_price %}({{ v.list_price }} ‚Ç¨){% endif %}</li>
                {% endfor %}
              </ul>
            {% else %}
              Aucun v√©hicule trouv√©
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p>Aucun contact trouv√©.</p>
{% endif %}
{% endblock %}
